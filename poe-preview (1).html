<!DOCTYPE html><html lang="en"><head><meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline' 'unsafe-eval' data: blob: https://cdnjs.cloudflare.com https://cdn.jsdelivr.net https://code.jquery.com https://unpkg.com https://d3js.org https://threejs.org https://cdn.plot.ly https://stackpath.bootstrapcdn.com https://maps.googleapis.com https://cdn.tailwindcss.com https://ajax.googleapis.com https://kit.fontawesome.com https://cdn.datatables.net https://maxcdn.bootstrapcdn.com https://code.highcharts.com https://tako-static-assets-production.s3.amazonaws.com https://www.youtube.com https://fonts.googleapis.com https://fonts.gstatic.com https://pfst.cf2.poecdn.net https://puc.poecdn.net https://i.imgur.com https://wikimedia.org https://*.icons8.com https://*.giphy.com https://picsum.photos https://images.unsplash.com; frame-src 'self' https://www.youtube.com https://trytako.com; child-src 'self'; manifest-src 'self'; worker-src 'self'; upgrade-insecure-requests; block-all-mixed-content;">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Share User Information</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
    }

    form {
      margin-bottom: 20px;
    }

    label {
      display: block;
      margin: 10px 0 5px;
    }

    input, textarea {
      width: 100%;
      padding: 10px;
      margin-bottom: 15px;
      border: 1px solid #ccc;
      border-radius: 5px;
    }

    #output {
      width: 300px;
      border: 1px solid #ccc;
      border-radius: 5px;
      padding: 20px;
      text-align: center;
      background: #f9f9f9;
    }

    #output img {
      max-width: 100%;
      height: auto;
      margin: 10px 0;
    }

    button {
      padding: 10px 15px;
      border: none;
      border-radius: 5px;
      background-color: #007bff;
      color: white;
      cursor: pointer;
    }

    button:hover {
      background-color: #0056b3;
    }
  </style>
</head>
<body>

<h1>Input Your Information</h1>

<form id="userForm">
  <label for="name">Name:</label>
  <input type="text" id="name" placeholder="Enter your name" required="">

  <label for="telephone">Telephone:</label>
  <input type="tel" id="telephone" placeholder="Enter your telephone" required="">

  <label for="address">Address:</label>
  <textarea id="address" placeholder="Enter your address" required=""></textarea>

  <label for="photo">Your Photo:</label>
  <input type="file" id="photo" accept="image/*" required="">

  <label for="dogPhoto">Your Dog's Photo:</label>
  <input type="file" id="dogPhoto" accept="image/*" required="">

  <button type="button" id="generateButton">Generate &amp; Share</button>
</form>

<div id="output"></div>

<script>
  const generateButton = document.getElementById('generateButton');
  const outputDiv = document.getElementById('output');

  generateButton.addEventListener('click', async () => {
    // Get user inputs
    const name = document.getElementById('name').value;
    const telephone = document.getElementById('telephone').value;
    const address = document.getElementById('address').value;
    const photo = document.getElementById('photo').files[0];
    const dogPhoto = document.getElementById('dogPhoto').files[0];

    if (!name || !telephone || !address || !photo || !dogPhoto) {
      alert('Please fill in all fields and upload both photos.');
      return;
    }

    // Create canvas to generate the picture
    const canvas = document.createElement('canvas');
    const ctx = canvas.getContext('2d');
    canvas.width = 400;
    canvas.height = 500;

    // Draw background
    ctx.fillStyle = '#f9f9f9';
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    // Add text
    ctx.fillStyle = '#000';
    ctx.font = '18px Arial';
    ctx.fillText(`Name: ${name}`, 20, 30);
    ctx.fillText(`Telephone: ${telephone}`, 20, 60);
    ctx.fillText(`Address: ${address}`, 20, 90);

    // Load and draw user's photo
    const userPhoto = await loadImage(photo);
    ctx.drawImage(userPhoto, 20, 120, 150, 150);

    // Load and draw dog's photo
    const dogPhotoImage = await loadImage(dogPhoto);
    ctx.drawImage(dogPhotoImage, 200, 120, 150, 150);

    // Add the canvas as an image to the output
    const image = document.createElement('img');
    image.src = canvas.toDataURL('image/png');
    outputDiv.innerHTML = ''; // Clear previous output
    outputDiv.appendChild(image);

    // Share using Web Share API
    const shareData = {
      title: 'User Information',
      text: `Check out this information:\nName: ${name}\nTelephone: ${telephone}\nAddress: ${address}`,
    };

    if (navigator.canShare && navigator.canShare({ files: [await canvasToFile(canvas)] })) {
      const file = await canvasToFile(canvas);
      shareData.files = [file];
      navigator.share(shareData).catch((err) => console.error('Error sharing:', err));
    } else {
      alert('Web Share API is not supported or cannot share files.');
    }
  });

  // Helper function to load an image from a file
  function loadImage(file) {
    return new Promise((resolve) => {
      const reader = new FileReader();
      reader.onload = () => {
        const img = new Image();
        img.onload = () => resolve(img);
        img.src = reader.result;
      };
      reader.readAsDataURL(file);
    });
  }

  // Helper function to convert canvas to a file
  function canvasToFile(canvas) {
    return new Promise((resolve) => {
      canvas.toBlob((blob) => {
        const file = new File([blob], 'user-info.png', { type: 'image/png' });
        resolve(file);
      });
    });
  }
</script>



</body></html>